{"version":3,"sources":["play-control.js"],"names":["define","langx","styler","noder","eventer","$","plugins","players","PlayControl","Plugin","inherit","klassName","pluginName","options","titles","play","pause","classes","selectors","playButton","_construct","elm","prototype","call","this","$el","$media","_media","media","$playButton","find","listenTo","togglePlay","updatePlayButton","stop","paused","ended","attr","removeClass","addClass","register"],"mappings":";;;;;;;AAAAA,QACE,gBACA,sBACA,qBACA,uBACA,qBACA,4BACA,aACA,SAASC,EAAMC,EAAOC,EAAOC,EAAQC,EAAIC,EAAQC,GACjD,aAIA,IAAIC,EAAcF,EAAQG,OAAOC,SAC/BC,UAAY,cAEZC,WAAa,4BAEbC,SACEC,QACEC,KAAQ,WACRC,MAAQ,aAEVC,SACEF,KAAO,OACPC,MAAQ,SAEVE,WACEC,WAAa,OAKjBC,WAAY,SAASC,EAAKR,GAExBP,EAAQG,OAAOa,UAAUF,WAAWG,KAAKC,KAAKH,EAAIR,GAGlD,IAAIY,EAAMD,KAAKnB,IACXa,EAAYM,KAAKX,QAAQK,UACzBQ,EAASF,KAAKG,OAASH,KAAKX,QAAQe,MAEpCV,EAAUC,WACZK,KAAKK,YAAcJ,EAAIK,KAAKZ,EAAUC,YAEtCK,KAAKK,YAAcJ,EAGrBD,KAAKO,SAASL,EAAO,QAAQF,KAAKQ,YAClCR,KAAKO,SAASL,EAAO,aAAaF,KAAKS,kBACvCT,KAAKO,SAASP,KAAKK,YAAY,QAASL,KAAKQ,YAC7CR,KAAKS,oBAIPlB,KAAO,WACLS,KAAKG,OAAOZ,QAIdmB,KAAO,WACLV,KAAKG,OAAOO,QAGdlB,MAAQ,WACNQ,KAAKG,OAAOX,SAMdgB,WAAa,WACPR,KAAKG,OAAOQ,UAAYX,KAAKG,OAAOS,QACtCZ,KAAKG,OAAOZ,OAEZS,KAAKG,OAAOX,SAMhBiB,iBAAmB,WAEbT,KAAKG,OAAOQ,UACdX,KAAKK,YAAYQ,KAAK,aAAcb,KAAKX,QAAQC,OAAOC,MACxDS,KAAKK,YAAYS,YAAYd,KAAKX,QAAQI,QAAQD,OAAOuB,SAASf,KAAKX,QAAQI,QAAQF,QAEvFS,KAAKK,YAAYQ,KAAK,aAAcb,KAAKX,QAAQC,OAAOE,OACxDQ,KAAKK,YAAYS,YAAYd,KAAKX,QAAQI,QAAQF,MAAMwB,SAASf,KAAKX,QAAQI,QAAQD,WAQ5F,OAFAV,EAAQkC,SAAShC,GAEVD,EAAQC,YAAcA","file":"../play-control.js","sourcesContent":["define([\r\n  \"skylark-langx\",\r\n  \"skylark-domx-styler\",\r\n  \"skylark-domx-noder\",\r\n  \"skylark-domx-eventer\",\r\n  \"skylark-domx-query\",\r\n  \"skylark-domx-plugins-base\",\r\n  \"./players\"\r\n],function(langx,styler,noder, eventer,$ , plugins,players) {\r\n  'use strict'\r\n\r\n  'use strict'\r\n\r\n  var PlayControl = plugins.Plugin.inherit({\r\n    klassName : \"PlayControl\",\r\n\r\n    pluginName : \"domx.players.play_control\",\r\n   \r\n    options : {\r\n      titles : {\r\n        play  : \"Play (k)\",\r\n        pause : \"Pause (k)\"\r\n      },\r\n      classes : {\r\n        play : \"play\",\r\n        pause : \"pause\"\r\n      },\r\n      selectors : {\r\n        playButton : null\r\n      }\r\n    },\r\n\r\n\r\n    _construct: function(elm, options) {\r\n      //this.options = options\r\n      plugins.Plugin.prototype._construct.call(this,elm,options);\r\n\r\n\r\n      let $el = this.$(),\r\n          selectors = this.options.selectors,\r\n          $media = this._media = this.options.media;\r\n\r\n      if (selectors.playButton) {\r\n        this.$playButton = $el.find(selectors.playButton);   \r\n      } else {\r\n        this.$playButton = $el;\r\n      }\r\n\r\n      this.listenTo($media,'click',this.togglePlay);\r\n      this.listenTo($media,'play,pause',this.updatePlayButton);\r\n      this.listenTo(this.$playButton,'click', this.togglePlay);\r\n      this.updatePlayButton();\r\n    },\r\n\r\n\r\n    play : function() {\r\n      this._media.play();\r\n\r\n    },\r\n\r\n    stop : function() {\r\n      this._media.stop();      \r\n    },\r\n\r\n    pause : function() {\r\n      this._media.pause();      \r\n    },\r\n\r\n    // togglePlay toggles the playback state of the video.\r\n    // If the video playback is paused or ended, the video is played\r\n    // otherwise, the video is paused\r\n    togglePlay : function () {\r\n      if (this._media.paused() || this._media.ended()) {\r\n        this._media.play();\r\n      } else {\r\n        this._media.pause();\r\n      }\r\n    },\r\n\r\n    // updatePlayButton updates the playback icon and tooltip\r\n    // depending on the playback state\r\n    updatePlayButton : function () {\r\n\r\n      if (this._media.paused()) {\r\n        this.$playButton.attr('data-title', this.options.titles.play);\r\n        this.$playButton.removeClass(this.options.classes.pause).addClass(this.options.classes.play);\r\n      } else {\r\n        this.$playButton.attr('data-title', this.options.titles.pause);\r\n        this.$playButton.removeClass(this.options.classes.play).addClass(this.options.classes.pause);\r\n      }\r\n    }\r\n\r\n  });\r\n\r\n  plugins.register(PlayControl);\r\n\r\n  return players.PlayControl = PlayControl;\r\n});\r\n\r\n"]}