/**
 * skylark-domx-plugins-players - A  ui library for rendering various media data specified by mime-type.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define(["skylark-langx","skylark-domx-styler","skylark-domx-noder","skylark-domx-eventer","skylark-domx-medias","skylark-domx-query","skylark-domx-plugins-base","skylark-domx-plugins-toggles/fullscreen","skylark-domx-plugins-toggles/Pip","./players","./play-control","./playback-animation","./progress-control","./time-control","./volume-control"],function(o,t,e,i,s,l,n,a,r,d,u,h,p,c,m){"use strict";var v=n.Plugin.inherit({klassName:"VideoPlayer",pluginName:"domx.players.video",options:{selectors:{video:"video",videoControls:".video-controls",playButton:".play-button",playbackIcons:".playback-icons use",timeControl:".time",timeElapsed:".time-elapsed",duration:".duration",progressControl:".video-progress",progressBar:".progress-bar",seek:".seek",seekTooltip:".seek-tooltip",volumeControl:".volume-control",volumeButton:".volume-button",volumeIcons:".volume-button use",volumeMute:'use[href="#volume-mute"]',volumeLow:'use[href="#volume-low"]',volumeHigh:'use[href="#volume-high"]',volume:".volume",playbackAnimation:".playback-animation",fullscreenButton:".fullscreen-button",fullscreenIcons:".fullscreen-button use",pipButton:".pip-button"}},_construct:function(o,t){n.Plugin.prototype._construct.call(this,o,t);let e=this.$(),i=this.options.selectors;this.$video=this.elmx().find(i.video),this.$videoControls=e.find(i.videoControls),this._playControl=u.instantiate(e.find(i.playButton)[0],{media:this.$video}),this._timeControl=c.instantiate(e.find(i.timeControl)[0],{media:this.$video}),this._progressControl=p.instantiate(e.find(i.progressControl)[0],{media:this.$video}),this._volumeControl=m.instantiate(e.find(i.volumeControl)[0],{media:this.$video}),this._playbackAnimation=h.instantiate(e.find(i.playbackAnimation)[0],{media:this.$video}),this._fullscreen=a.instantiate(e.find(i.fullscreenButton)[0],{target:this.elmx()}),this._pip=r.instantiate(e.find(i.pipButton)[0],{target:this.$video}),this.listenTo(l(this._videoControls),"mouseenter",this.showControls),this.listenTo(l(this._videoControls),"mouseleave",this.hideControls),this.listenTo(l(document),"keyup",this.keyboardShortcuts),!!document.createElement("video").canPlayType&&(this.$video.controls(!1),this.$videoControls.show()),this.load()},source:function(o){this._media=o;let t=o.title||"",e=o.href,i=o.type,s=o.poster||"",l=o.altText||"",n=this.$(),a=this._video,r=this._$play,d=this._$poster;n.prop("title",t),a.canPlayType&&e&&i&&a.canPlayType(i)&&(a.src=e),a.poster=s,d.prop({src:s,alt:l}),r.prop({download:t,href:e})},load:function(){this.$video.load()},play:function(){this.$video.play()},stop:function(){this.$video.stop()},pause:function(){this.$video.pause()},togglePlay:function(){this.$video.paused()||this.$video.ended()?this.$video.play():this.$video.pause()},hideControls:function(){this.$video.paused()||t.addClass(this._videoControls,"hide")},showControls:function(){t.removeClass(this._videoControls,"hide")},keyboardShortcuts:function(o){const{key:t}=o;switch(t){case"k":this.togglePlay(),this._playbackAnimation.animatePlayback(),this.$video.paused()?this.showControls():setTimeout(()=>{this.hideControls()},2e3);break;case"m":this._volumeControl.toggleMute();break;case"f":this._fullscreen.toggleFullScreen();break;case"p":this._pip.togglePip()}}});return n.register(v),d.VideoPlayer=v});
//# sourceMappingURL=sourcemaps/video-player.js.map
