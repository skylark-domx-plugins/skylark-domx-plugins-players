/**
 * skylark-domx-plugins-players - A  ui library for rendering various media data specified by mime-type.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define(["skylark-langx","skylark-domx-styler","skylark-domx-noder","skylark-domx-eventer","skylark-domx-medias","skylark-domx-query","skylark-domx-plugins-base","./players","./controls-bar","./playback-animation"],function(t,o,i,e,s,n,a,l,r,d){"use strict";var h=a.Plugin.inherit({klassName:"VideoPlayer",pluginName:"domx.players.video",options:{selectors:{video:"video",videoControls:".controls-bar",playbackAnimation:".playback-animation"}},_construct:function(t,o){a.Plugin.prototype._construct.call(this,t,o);let i=this.$(),e=this.options.selectors;this.$video=this.elmx().find(e.video),this.$videoControls=i.find(e.videoControls),this._controlsBar=r.instantiate(this.$videoControls[0],{media:this.$video,container:this.elmx()}),this._playbackAnimation=d.instantiate(i.find(e.playbackAnimation)[0],{media:this.$video}),this.listenTo(i,"mouseenter",this.showControls),this.listenTo(i,"mouseleave",this.hideControls),this.listenTo(n(document),"keyup",this.keyboardShortcuts),!!document.createElement("video").canPlayType&&(this.$video.controls(!1),this.$videoControls.show()),this.load()},source:function(t){this._media=t;let o=t.title||"",i=t.href,e=t.type,s=t.poster||"",n=t.altText||"",a=this.$(),l=this._video,r=this._$play,d=this._$poster;a.prop("title",o),l.canPlayType&&i&&e&&l.canPlayType(e)&&(l.src=i),l.poster=s,d.prop({src:s,alt:n}),r.prop({download:o,href:i})},load:function(){this.$video.load()},play:function(){this.$video.play()},stop:function(){this.$video.stop()},pause:function(){this.$video.pause()},togglePlay:function(){this.$video.paused()||this.$video.ended()?this.$video.play():this.$video.pause()},hideControls:function(){this.$video.paused()||this.$videoControls.hide()},showControls:function(){this.$videoControls.show()},keyboardShortcuts:function(t){const{key:o}=t;switch(o){case"k":this.togglePlay(),this._playbackAnimation.animatePlayback(),this.$video.paused()?this.showControls():setTimeout(()=>{this.hideControls()},2e3);break;case"m":this._volumeControl.toggleMute();break;case"f":this._fullscreen.toggleFullScreen();break;case"p":this._pip.togglePip()}}});return a.register(h),l.VideoPlayer=h});
//# sourceMappingURL=sourcemaps/video-player.js.map
